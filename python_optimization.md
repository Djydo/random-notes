Profile the code before optimizing. Profiling helps measure where a code spends most of its time.

## General tips:
   - In order to optimize, use the real data not synthentic data. 
   - Run the optimization on a production-like environment
   - Turn off antivirus
   - Have already prepared test suites to ensure that the code is correct after optimization
   - Know when to measure

## Measuring time
* tools: 
   - time module;
   - timeit module;
   - python3 has perf_counter to monotonic timers (from time import perf_counter)

For measuring a single run time of a code, use the perf_counter. When an average time performance of a code over multiple run is desirable, use the ```time_it``` module.


## CPU profiling
*  tools:
    - cProfile
    - pstat
There are two types: Statistical and Deterministic
Statistical profiler records where the programs is at small time intervals while deterministic profiler records every function calls and their returns as well as exceptions.
pstat module displays the statistics file generated by the profiler

 `python -m <filename>` # the filename contains the portion of code that we intend to profile by using cprofile
 `python -m pstats <file_generated_from_profiler>` 

 To get an HTTP view, install package snakeviz and view the generated profiler output using snakeviz.
 To run profiler on iPython, use ```prun <file_name>```

 ## Line profiling
 * tools:
     - kernprof 
     - line_profiler
To use kernprof, put @profile decorator on the function that is intended to be profiled. Then load the file using command: kernprof -l <filename_of_file_to_profile>. Use python -m line_profiler <profiled_file>.lprof to view the output.

To run on iPython, remove the python decorator. 
     Load the file using %run -n <filename>
     %load_ext line_profiler
     %lprun -f










References
1. https://infiniteundo.com/post/25326999628/falsehoods-programmers-believe-about-time
